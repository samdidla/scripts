user nobody nogroup;
worker_processes 4;

events {
    worker_connections 768;
}

http {
    server {
        listen 80;
        server_name _;

        # maintenance mode logic
        if ($http_d3_device_uuid) {
            return 503 '{"severity": "ERROR", "title": "Server Maintenance", "code": "banking.system.maintenance", "message": "Our mobile app is down for periodic maintenance and we are working to make the app available as soon as we can. Please come back and try again shortly. Thank you!"}';
        }

        # Health Check Endpoint
        location = /healthcheck.html {
            return 200 "GREEN";
        }

        location / {
            return 302 https://www.wintrust.com/maintenance.html;
        }
    }
}
